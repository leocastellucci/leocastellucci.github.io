import{r as n,p as Wt,y as Ye,W as ge,E as ot,x as Yt,u as ee,i as qt,j as v,b as he,n as Rt,X as gt,a as St,e as Zt,H as $t,D as zt,c as ut,J as ht,f as Ee,A as Mt,B as Et,Y as dt,v as wt,q as we,N as Xt,G as Gt,g as xt,Z as Kt,s as Tt,C as tt,_ as rt,$ as Jt,a0 as Qt,a1 as en}from"./index-CBbVRLbk.js";import{c as A,r as tn,a6 as nn,a7 as m,n as ft,a8 as sn,X as on,s as rn,Q as ln,S as an,v as cn,a9 as un,aa as dn,a as De,o as fn,Y as pn,W as lt,e as nt,_ as mn,ab as gn,z as hn,G as xn,t as bn,J as yn,L as vn,I as In,A as Rn,w as At,D as Sn,ac as Mn,y as En,E as wn,x as Tn,B as An,ad as Pn,a5 as Cn,a4 as Vn}from"./getPseudoElementBounds-BuGxSHcr.js";const Ln=new Map([["bold",n.createElement(n.Fragment,null,n.createElement("path",{d:"M184.49,167.51a12,12,0,0,1,0,17l-48,48a12,12,0,0,1-17,0l-48-48a12,12,0,0,1,17-17L128,207l39.51-39.52A12,12,0,0,1,184.49,167.51Zm-96-79L128,49l39.51,39.52a12,12,0,0,0,17-17l-48-48a12,12,0,0,0-17,0l-48,48a12,12,0,0,0,17,17Z"}))],["duotone",n.createElement(n.Fragment,null,n.createElement("path",{d:"M80,176h96l-48,48ZM128,32,80,80h96Z",opacity:"0.2"}),n.createElement("path",{d:"M176,168H80a8,8,0,0,0-5.66,13.66l48,48a8,8,0,0,0,11.32,0l48-48A8,8,0,0,0,176,168Zm-48,44.69L99.31,184h57.38ZM80,88h96a8,8,0,0,0,5.66-13.66l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,80,88Zm48-44.69L156.69,72H99.31Z"}))],["fill",n.createElement(n.Fragment,null,n.createElement("path",{d:"M72.61,83.06a8,8,0,0,1,1.73-8.72l48-48a8,8,0,0,1,11.32,0l48,48A8,8,0,0,1,176,88H80A8,8,0,0,1,72.61,83.06ZM176,168H80a8,8,0,0,0-5.66,13.66l48,48a8,8,0,0,0,11.32,0l48-48A8,8,0,0,0,176,168Z"}))],["light",n.createElement(n.Fragment,null,n.createElement("path",{d:"M180.24,171.76a6,6,0,0,1,0,8.48l-48,48a6,6,0,0,1-8.48,0l-48-48a6,6,0,0,1,8.48-8.48L128,215.51l43.76-43.75A6,6,0,0,1,180.24,171.76Zm-96-87.52L128,40.49l43.76,43.75a6,6,0,0,0,8.48-8.48l-48-48a6,6,0,0,0-8.48,0l-48,48a6,6,0,0,0,8.48,8.48Z"}))],["regular",n.createElement(n.Fragment,null,n.createElement("path",{d:"M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z"}))],["thin",n.createElement(n.Fragment,null,n.createElement("path",{d:"M178.83,173.17a4,4,0,0,1,0,5.66l-48,48a4,4,0,0,1-5.66,0l-48-48a4,4,0,0,1,5.66-5.66L128,218.34l45.17-45.17A4,4,0,0,1,178.83,173.17Zm-96-90.34L128,37.66l45.17,45.17a4,4,0,1,0,5.66-5.66l-48-48a4,4,0,0,0-5.66,0l-48,48a4,4,0,0,0,5.66,5.66Z"}))]]),Pt=n.forwardRef((e,t)=>n.createElement(Wt,{ref:t,...e,weights:Ln}));Pt.displayName="CaretUpDownIcon";function Nn(e){const t=n.useRef(!0);t.current&&(t.current=!1,e())}const Ct=n.createContext(null),Vt=n.createContext(null);function Te(){const e=n.useContext(Ct);if(e===null)throw new Error(Ye(60));return e}function Lt(){const e=n.useContext(Vt);if(e===null)throw new Error(Ye(61));return e}let bt=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const Hn={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},Fn={valid(e){return e===null?null:e?{[bt.valid]:""}:{[bt.invalid]:""}}},Dn=n.createContext({invalid:void 0,name:void 0,validityData:{state:Hn,errors:[],error:"",value:"",initialValue:null},setValidityData:ge,disabled:void 0,touched:!1,setTouched:ge,dirty:!1,setDirty:ge,filled:!1,setFilled:ge,focused:!1,setFocused:ge,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=ot)=>e,getInputValidationProps:(e=ot)=>e,inputRef:{current:null},commit:async()=>{}}});function pt(e=!0){const t=n.useContext(Dn);if(t.setValidityData===ge&&!e)throw new Error(Ye(28));return t}const Un=n.createContext({controlId:void 0,setControlId:ge,labelId:void 0,setLabelId:ge,messageIds:[],setMessageIds:ge,getDescriptionProps:e=>e});function Nt(){return n.useContext(Un)}function Ht(e={}){const{id:t,implicit:s=!1,controlRef:o}=e,{controlId:c,setControlId:r}=Nt(),i=Yt(t);return ee(()=>{if(!(!s&&!t||r===ge)){if(s){const u=o==null?void 0:o.current;qt(u)&&u.closest("label")!=null?r(t??null):r(c??i)}else t&&r(t);return()=>{t&&r(void 0)}}},[t,o,c,r,s,i]),c??i}const On=(e,t)=>Object.is(e,t);function Ue(e,t,s){return e==null||t==null?Object.is(e,t):s(e,t)}function st(e,t,s){return!e||e.length===0?!1:e.some(o=>o===void 0?!1:Ue(o,t,s))}function it(e,t,s){return!e||e.length===0?-1:e.findIndex(o=>o===void 0?!1:Ue(o,t,s))}function jn(e,t,s){return e.filter(o=>!Ue(o,t,s))}function at(e){if(e==null)return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Ft(e){return e!=null&&e.length>0&&typeof e[0]=="object"&&e[0]!=null&&"items"in e[0]}function Bn(e){if(!Array.isArray(e))return e!=null&&!("null"in e);if(Ft(e)){for(const t of e)for(const s of t.items)if(s&&s.value==null&&s.label!=null)return!0;return!1}for(const t of e)if(t&&t.value==null&&t.label!=null)return!0;return!1}function kn(e,t){if(t&&e!=null)return t(e)??"";if(e&&typeof e=="object"){if("label"in e&&e.label!=null)return String(e.label);if("value"in e)return String(e.value)}return at(e)}function Fe(e,t){return t&&e!=null?t(e)??"":e&&typeof e=="object"&&"value"in e&&"label"in e?at(e.value):at(e)}function Dt(e,t,s){function o(){return kn(e,s)}if(s&&e!=null)return s(e);if(e&&typeof e=="object"&&"label"in e&&e.label!=null)return e.label;if(t&&!Array.isArray(t))return t[e]??o();if(Array.isArray(t)){const c=Ft(t)?t.flatMap(r=>r.items):t;if(e==null||typeof e!="object"){const r=c.find(i=>i.value===e);return r&&r.label!=null?r.label:o()}if("value"in e){const r=c.find(i=>i&&i.value===e.value);if(r&&r.label!=null)return r.label}}return o()}function _n(e,t,s){return e.reduce((o,c,r)=>(r>0&&o.push(", "),o.push(v.jsx(n.Fragment,{children:Dt(c,t,s)},r)),o),[])}const d={id:A(e=>e.id),modal:A(e=>e.modal),multiple:A(e=>e.multiple),items:A(e=>e.items),itemToStringLabel:A(e=>e.itemToStringLabel),itemToStringValue:A(e=>e.itemToStringValue),isItemEqualToValue:A(e=>e.isItemEqualToValue),value:A(e=>e.value),hasSelectedValue:A(e=>{const{value:t,multiple:s,itemToStringValue:o}=e;return t==null?!1:s&&Array.isArray(t)?t.length>0:Fe(t,o)!==""}),hasNullItemLabel:A((e,t)=>t?Bn(e.items):!1),open:A(e=>e.open),mounted:A(e=>e.mounted),forceMount:A(e=>e.forceMount),transitionStatus:A(e=>e.transitionStatus),openMethod:A(e=>e.openMethod),activeIndex:A(e=>e.activeIndex),selectedIndex:A(e=>e.selectedIndex),isActive:A((e,t)=>e.activeIndex===t),isSelected:A((e,t,s)=>{const o=e.isItemEqualToValue,c=e.value;return e.multiple?Array.isArray(c)&&c.some(r=>Ue(r,s,o)):e.selectedIndex===t&&e.selectedIndex!==null?!0:Ue(c,s,o)}),isSelectedByFocus:A((e,t)=>e.selectedIndex===t),popupProps:A(e=>e.popupProps),triggerProps:A(e=>e.triggerProps),triggerElement:A(e=>e.triggerElement),positionerElement:A(e=>e.positionerElement),listElement:A(e=>e.listElement),scrollUpArrowVisible:A(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:A(e=>e.scrollDownArrowVisible),hasScrollArrows:A(e=>e.hasScrollArrows)},Wn=n.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:ge,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function Ut(){return n.useContext(Wn)}function Yn(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}function qn(e){const{enabled:t=!0,value:s,id:o,name:c,controlRef:r,commit:i}=e,{formRef:u}=Ut(),{invalid:M,markedDirtyRef:O,validityData:x,setValidityData:E}=pt(),h=he(e.getValue);ee(()=>{if(!t)return;let S=s;S===void 0&&(S=h()),x.initialValue===null&&S!==null&&E(P=>({...P,initialValue:S}))},[t,E,s,x.initialValue,h]),ee(()=>{!t||!o||u.current.fields.set(o,{getValue:h,name:c,controlRef:r,validityData:Yn(x,M),validate(S=!0){let P=s;P===void 0&&(P=h()),O.current=!0,S?Rt.flushSync(()=>i(P)):i(P)}})},[i,r,t,u,h,o,M,O,c,x,s]),ee(()=>{const S=u.current.fields;return()=>{o&&S.delete(o)}},[u,o])}function Zn(e,t){const s=n.useRef(e),o=he(t);ee(()=>{s.current!==e&&o(s.current)},[e,o]),ee(()=>{s.current=e},[e])}function $n(e){const{id:t,value:s,defaultValue:o=null,onValueChange:c,open:r,defaultOpen:i=!1,onOpenChange:u,name:M,disabled:O=!1,readOnly:x=!1,required:E=!1,modal:h=!0,actionsRef:S,inputRef:P,onOpenChangeComplete:I,items:j,multiple:g=!1,itemToStringLabel:$,itemToStringValue:a,isItemEqualToValue:z=On,highlightItemOnHover:me=!0,children:Ie}=e,{clearErrors:J}=Ut(),{setDirty:N,setTouched:Y,setFocused:ae,shouldValidateOnChange:U,validityData:q,setFilled:w,name:X,disabled:re,validation:C,validationMode:G}=pt(),l=Ht({id:t}),F=re||O,T=X??M,[f,xe]=gt({controlled:s,default:g?o??ht:o,name:"Select",state:"value"}),[V,le]=gt({controlled:r,default:i,name:"Select",state:"open"}),W=n.useRef([]),p=n.useRef([]),H=n.useRef(null),te=n.useRef(null),Re=n.useRef(0),R=n.useRef(null),B=n.useRef([]),D=n.useRef(!1),ne=n.useRef(!1),be=n.useRef(null),Q=n.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),Z=n.useRef(!1),{mounted:k,setMounted:ie,transitionStatus:_}=St(V),{openMethod:K,triggerProps:ce,reset:Ae}=tn(V),y=Zt(()=>new nn({id:l,modal:h,multiple:g,itemToStringLabel:$,itemToStringValue:a,isItemEqualToValue:z,value:f,open:V,mounted:k,transitionStatus:_,items:j,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,fe=m(y,d.activeIndex),ue=m(y,d.selectedIndex),Se=m(y,d.triggerElement),Pe=m(y,d.positionerElement),Ce=n.useMemo(()=>g&&Array.isArray(f)&&f.length===0?"":Fe(f,a),[g,f,a]),Me=n.useMemo(()=>g&&Array.isArray(f)?f.map(b=>Fe(b,a)):Fe(f,a),[g,f,a]),He=ft(y.state.triggerElement);qn({id:l,commit:C.commit,value:f,controlRef:He,name:T,getValue:()=>Me});const ye=n.useRef(f);ee(()=>{f!==ye.current&&y.set("forceMount",!0)},[y,f]),ee(()=>{w(g?Array.isArray(f)&&f.length>0:f!=null)},[g,f,w]),ee(function(){if(V)return;const L=B.current;if(g){const pe=Array.isArray(f)?f:[];if(pe.length===0){y.set("selectedIndex",null);return}const de=pe[pe.length-1],Ve=it(L,de,z);y.set("selectedIndex",Ve===-1?null:Ve);return}const oe=it(L,f,z);y.set("selectedIndex",oe===-1?null:oe)},[g,V,f,B,z,y]),Zn(f,()=>{J(T),N(f!==q.initialValue),U()?C.commit(f):C.commit(f,!0)});const Oe=he((b,L)=>{if(u==null||u(b,L),!L.isCanceled&&(le(b),!b&&(L.reason===$t||L.reason===zt)&&(Y(!0),ae(!1),G==="onBlur"&&C.commit(f)),!b&&y.state.activeIndex!==null)){const oe=W.current[y.state.activeIndex];queueMicrotask(()=>{oe==null||oe.setAttribute("tabindex","-1")})}}),je=he(()=>{ie(!1),y.set("activeIndex",null),Ae(),I==null||I(!1)});ut({enabled:!S,open:V,ref:H,onComplete(){V||je()}}),n.useImperativeHandle(S,()=>({unmount:je}),[je]);const Le=he((b,L)=>{c==null||c(b,L),!L.isCanceled&&xe(b)}),Be=he(()=>{const b=y.state.listElement||H.current;if(!b)return;const L=b.scrollTop,oe=b.scrollTop+b.clientHeight,pe=L>1,de=oe<b.scrollHeight-1;y.state.scrollUpArrowVisible!==pe&&y.set("scrollUpArrowVisible",pe),y.state.scrollDownArrowVisible!==de&&y.set("scrollDownArrowVisible",de)}),se=sn({open:V,onOpenChange:Oe,elements:{reference:Se,floating:Pe}}),qe=on(se,{enabled:!x&&!F,event:"mousedown"}),Ze=rn(se,{bubbles:!1}),ke=ln(se,{enabled:!x&&!F,listRef:W,activeIndex:fe,selectedIndex:ue,disabledIndices:ht,onNavigate(b){b===null&&!V||y.set("activeIndex",b)},focusItemOnHover:!1}),ve=an(se,{enabled:!x&&!F&&(V||!g),listRef:p,activeIndex:fe,selectedIndex:ue,onMatch(b){V?y.set("activeIndex",b):Le(B.current[b],Ee("none"))},onTypingChange(b){D.current=b}}),{getReferenceProps:$e,getFloatingProps:Ne,getItemProps:_e}=cn([qe,Ze,ke,ve]),We=n.useMemo(()=>Mt($e(),ce,l?{id:l}:ot),[$e,ce,l]);Nn(()=>{y.update({popupProps:Ne(),triggerProps:We})}),ee(()=>{y.update({id:l,modal:h,multiple:g,value:f,open:V,mounted:k,transitionStatus:_,popupProps:Ne(),triggerProps:We,items:j,itemToStringLabel:$,itemToStringValue:a,isItemEqualToValue:z,openMethod:K})},[y,l,h,g,f,V,k,_,Ne,We,j,$,a,z,K]);const Qe=n.useMemo(()=>({store:y,name:T,required:E,disabled:F,readOnly:x,multiple:g,itemToStringLabel:$,itemToStringValue:a,highlightItemOnHover:me,setValue:Le,setOpen:Oe,listRef:W,popupRef:H,scrollHandlerRef:te,handleScrollArrowVisibility:Be,scrollArrowsMountedCountRef:Re,getItemProps:_e,events:se.context.events,valueRef:R,valuesRef:B,labelsRef:p,typingRef:D,selectionRef:Q,selectedItemTextRef:be,validation:C,onOpenChangeComplete:I,keyboardActiveRef:ne,alignItemWithTriggerActiveRef:Z,initialValueRef:ye}),[y,T,E,F,x,g,$,a,me,Le,Oe,_e,se.context.events,C,I,Be]),ze=Et(P,C.inputRef),Xe=g&&Array.isArray(f)&&f.length>0,et=n.useMemo(()=>!g||!Array.isArray(f)||!T?null:f.map(b=>{const L=Fe(b,a);return v.jsx("input",{type:"hidden",name:T,value:L},L)}),[g,f,T,a]);return v.jsx(Ct.Provider,{value:Qe,children:v.jsxs(Vt.Provider,{value:se,children:[Ie,v.jsx("input",{...C.getInputValidationProps({onFocus(){var b;(b=y.state.triggerElement)==null||b.focus({focusVisible:!0})},onChange(b){if(b.nativeEvent.defaultPrevented)return;const L=b.target.value,oe=Ee(dt,b.nativeEvent);function pe(){if(g)return;const de=B.current.find(Ve=>Fe(Ve,a).toLowerCase()===L.toLowerCase());de!=null&&(N(de!==q.initialValue),Le(de,oe),U()&&C.commit(de))}y.set("forceMount",!0),queueMicrotask(pe)}}),name:g?void 0:T,value:Ce,disabled:F,required:E&&!Xe,readOnly:x,ref:ze,style:T?un:dn,tabIndex:-1,"aria-hidden":!0}),et]})})}const Ge=2,zn=400,yt=200,Xn={...pn,...Fn,value:()=>null},Gn=n.forwardRef(function(t,s){const{render:o,className:c,id:r,disabled:i=!1,nativeButton:u=!0,...M}=t,{setTouched:O,setFocused:x,validationMode:E,state:h,disabled:S}=pt(),{labelId:P}=Nt(),{store:I,setOpen:j,selectionRef:g,validation:$,readOnly:a,required:z,alignItemWithTriggerActiveRef:me,disabled:Ie,keyboardActiveRef:J}=Te(),N=S||Ie||i,Y=m(I,d.open),ae=m(I,d.value),U=m(I,d.triggerProps),q=m(I,d.positionerElement),w=m(I,d.listElement),X=m(I,d.id),re=m(I,d.hasSelectedValue),C=!re&&Y,G=m(I,d.hasNullItemLabel,C),l=r??X;Ht({id:l});const F=ft(q),T=n.useRef(null),{getButtonProps:f,buttonRef:xe}=wt({disabled:N,native:u}),V=he(D=>{I.set("triggerElement",D)}),le=Et(s,T,xe,V),W=De(),p=De(),H=De(),te=De();n.useEffect(()=>{if(Y)return!(re||G)?H.start(zn,()=>{g.current.allowUnselectedMouseUp=!0,g.current.allowSelectedMouseUp=!0}):te.start(yt,()=>{g.current.allowUnselectedMouseUp=!0,H.start(yt,()=>{g.current.allowSelectedMouseUp=!0})}),()=>{H.clear(),te.clear()};g.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},p.clear()},[Y,re,G,g,p,H,te]);const Re=n.useMemo(()=>{var D;return(w==null?void 0:w.id)??((D=fn(q))==null?void 0:D.id)},[w,q]),R=Mt(U,{id:l,role:"combobox","aria-expanded":Y?"true":"false","aria-haspopup":"listbox","aria-controls":Y?Re:void 0,"aria-labelledby":P,"aria-readonly":a||void 0,"aria-required":z||void 0,tabIndex:N?-1:0,ref:le,onFocus(D){x(!0),Y&&me.current&&j(!1,Ee(dt,D.nativeEvent)),W.start(0,()=>{I.set("forceMount",!0)})},onBlur(D){nt(q,D.relatedTarget)||(O(!0),x(!1),E==="onBlur"&&$.commit(ae))},onPointerMove(){J.current=!1},onKeyDown(){J.current=!0},onMouseDown(D){if(Y)return;const ne=lt(D.currentTarget);function be(Q){if(!T.current)return;const Z=Q.target;if(nt(T.current,Z)||nt(F.current,Z)||Z===T.current)return;const k=mn(T.current);Q.clientX>=k.left-Ge&&Q.clientX<=k.right+Ge&&Q.clientY>=k.top-Ge&&Q.clientY<=k.bottom+Ge||j(!1,Ee(Xt,Q))}p.start(0,()=>{ne.addEventListener("mouseup",be,{once:!0})})}},$.getValidationProps,M,f);R.role="combobox";const B=n.useMemo(()=>({...h,open:Y,disabled:N,value:ae,readOnly:a,placeholder:!re}),[h,Y,N,ae,a,re]);return we("button",t,{ref:[s,T],state:B,stateAttributesMapping:Xn,props:R})}),Kn={value:()=>null},Jn=n.forwardRef(function(t,s){const{className:o,render:c,children:r,placeholder:i,...u}=t,{store:M,valueRef:O}=Te(),x=m(M,d.value),E=m(M,d.items),h=m(M,d.itemToStringLabel),S=m(M,d.hasSelectedValue),P=!S&&i!=null&&r==null,I=m(M,d.hasNullItemLabel,P),j=n.useMemo(()=>({value:x,placeholder:!S}),[x,S]);let g=null;return typeof r=="function"?g=r(x):r!=null?g=r:!S&&i!=null&&!I?g=i:Array.isArray(x)?g=_n(x,E,h):g=Dt(x,E,h),we("span",t,{state:j,ref:[s,O],props:[{children:g},u],stateAttributesMapping:Kn})}),Qn=n.forwardRef(function(t,s){const{className:o,render:c,...r}=t,{store:i}=Te(),u=m(i,d.open),M=n.useMemo(()=>({open:u}),[u]);return we("span",t,{state:M,ref:s,props:[{"aria-hidden":!0,children:"▼"},r],stateAttributesMapping:gn})}),es=n.createContext(void 0),ts=n.forwardRef(function(t,s){const{store:o}=Te(),c=m(o,d.mounted),r=m(o,d.forceMount);return c||r?v.jsx(es.Provider,{value:!0,children:v.jsx(hn,{ref:s,...t})}):null}),Ot=n.createContext(void 0);function jt(){const e=n.useContext(Ot);if(!e)throw new Error(Ye(59));return e}function Je(e,t){e&&Object.assign(e.style,t)}const Bt={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},ns={position:"fixed"},ss=n.forwardRef(function(t,s){const{anchor:o,positionMethod:c="absolute",className:r,render:i,side:u="bottom",align:M="center",sideOffset:O=0,alignOffset:x=0,collisionBoundary:E="clipping-ancestors",collisionPadding:h,arrowPadding:S=5,sticky:P=!1,disableAnchorTracking:I,alignItemWithTrigger:j=!0,collisionAvoidance:g=xn,...$}=t,{store:a,listRef:z,labelsRef:me,alignItemWithTriggerActiveRef:Ie,selectedItemTextRef:J,valuesRef:N,initialValueRef:Y,popupRef:ae,setValue:U}=Te(),q=Lt(),w=m(a,d.open),X=m(a,d.mounted),re=m(a,d.modal),C=m(a,d.value),G=m(a,d.openMethod),l=m(a,d.positionerElement),F=m(a,d.triggerElement),T=m(a,d.isItemEqualToValue),f=n.useRef(null),xe=n.useRef(null),[V,le]=n.useState(j),W=X&&V&&G!=="touch";!X&&V!==j&&le(j),ee(()=>{X||(d.scrollUpArrowVisible(a.state)&&a.set("scrollUpArrowVisible",!1),d.scrollDownArrowVisible(a.state)&&a.set("scrollDownArrowVisible",!1))},[a,X]),n.useImperativeHandle(Ie,()=>W),bn((W||re)&&w&&G!=="touch",F);const p=yn({anchor:o,floatingRootContext:q,positionMethod:c,mounted:X,side:u,sideOffset:O,align:M,alignOffset:x,arrowPadding:S,collisionBoundary:E,collisionPadding:h,sticky:P,disableAnchorTracking:I??W,collisionAvoidance:g,keepMounted:!0}),H=W?"none":p.side,te=W?ns:p.positionerStyles,Re=n.useMemo(()=>{const Z={};return w||(Z.pointerEvents="none"),{role:"presentation",hidden:!X,style:{...te,...Z}}},[w,X,te]),R=n.useMemo(()=>({open:w,side:H,align:p.align,anchorHidden:p.anchorHidden}),[w,H,p.align,p.anchorHidden]),B=he(Z=>{a.set("positionerElement",Z)}),D=we("div",t,{ref:[s,B],state:R,stateAttributesMapping:At,props:[Re,$]}),ne=n.useRef(0),be=he(Z=>{if(Z.size===0&&ne.current===0||N.current.length===0)return;const k=ne.current;if(ne.current=Z.size,Z.size===k)return;const ie=Ee(dt);if(k!==0&&!a.state.multiple&&C!==null&&it(N.current,C,T)===-1){const K=Y.current,Ae=K!=null&&st(N.current,K,T)?K:null;U(Ae,ie),Ae===null&&(a.set("selectedIndex",null),J.current=null)}if(k!==0&&a.state.multiple&&Array.isArray(C)){const _=C.filter(K=>st(N.current,K,T));(_.length!==C.length||_.some(K=>!st(C,K,T)))&&(U(_,ie),_.length===0&&(a.set("selectedIndex",null),J.current=null))}if(w&&W){a.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const _={height:""};Je(l,_),Je(ae.current,_)}}),Q=n.useMemo(()=>({...p,side:H,alignItemWithTriggerActive:W,setControlledAlignItemWithTrigger:le,scrollUpArrowRef:f,scrollDownArrowRef:xe}),[p,H,W,le]);return v.jsx(vn,{elementsRef:z,labelsRef:me,onMapChange:be,children:v.jsxs(Ot.Provider,{value:Q,children:[X&&re&&v.jsx(In,{inert:Rn(!w),cutout:F}),D]})})});function kt(e){const t=e.currentTarget.getBoundingClientRect();return t.top+1<=e.clientY&&e.clientY<=t.bottom-1&&t.left+1<=e.clientX&&e.clientX<=t.right-1}const Ke="base-ui-disable-scrollbar",ct={className:Ke,getElement(e){return v.jsx("style",{nonce:e,href:Ke,precedence:"base-ui:low",children:`.${Ke}{scrollbar-width:none}.${Ke}::-webkit-scrollbar{display:none}`})}};function os(e,t=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,s))}const rs=n.createContext(void 0),ls={disableStyleElements:!1};function is(){return n.useContext(rs)??ls}const as={...At,...Tt},cs=n.forwardRef(function(t,s){const{render:o,className:c,...r}=t,{store:i,popupRef:u,onOpenChangeComplete:M,setOpen:O,valueRef:x,selectedItemTextRef:E,keyboardActiveRef:h,multiple:S,handleScrollArrowVisibility:P,scrollHandlerRef:I,highlightItemOnHover:j}=Te(),{side:g,align:$,alignItemWithTriggerActive:a,setControlledAlignItemWithTrigger:z,scrollDownArrowRef:me,scrollUpArrowRef:Ie}=jt(),J=Sn()!=null,N=Lt(),{nonce:Y,disableStyleElements:ae}=is(),U=De(),q=m(i,d.id),w=m(i,d.open),X=m(i,d.mounted),re=m(i,d.popupProps),C=m(i,d.transitionStatus),G=m(i,d.triggerElement),l=m(i,d.positionerElement),F=m(i,d.listElement),T=n.useRef(0),f=n.useRef(!1),xe=n.useRef(0),V=n.useRef(!1),le=n.useRef({}),W=Gt(),p=he(R=>{if(!l||!u.current||!V.current)return;if(f.current||!a){P();return}const B=l.style.top==="0px",D=l.style.bottom==="0px",ne=l.getBoundingClientRect().height,be=lt(l),Q=getComputedStyle(l),Z=parseFloat(Q.marginTop),k=parseFloat(Q.marginBottom),ie=vt(getComputedStyle(u.current)),_=be.documentElement.clientHeight-Z-k,K=R.scrollTop,ce=R.scrollHeight,Ae=R.clientHeight,y=ce-Ae;let fe=0,ue=null,Se=!1;if(B){const Pe=y-K,Ce=ne+Pe,Me=Math.min(Ce,_);fe=Me,Me!==_?ue=y:Se=!0}else if(D){const Pe=K-0,Ce=ne+Pe,Me=Math.min(Ce,_),He=Ce-_;fe=Me,Me!==_?ue=0:(Se=!0,K<y&&(ue=K-(Pe-He)))}fe!==0&&(l.style.height=`${fe}px`),ue!=null&&(R.scrollTop=ue),(Se||fe>=ie)&&(f.current=!0),P()});n.useImperativeHandle(I,()=>p,[p]),ut({open:w,ref:u,onComplete(){w&&(M==null||M(!0))}});const H=n.useMemo(()=>({open:w,transitionStatus:C,side:g,align:$}),[w,C,g,$]);ee(()=>{!l||!u.current||Object.keys(le.current).length||(le.current={top:l.style.top||"0",left:l.style.left||"0",right:l.style.right,height:l.style.height,bottom:l.style.bottom,minHeight:l.style.minHeight,maxHeight:l.style.maxHeight,marginTop:l.style.marginTop,marginBottom:l.style.marginBottom})},[u,l]),ee(()=>{w||a||(V.current=!1,f.current=!1,T.current=0,xe.current=0,Je(l,le.current))},[w,a,l,u]),ee(()=>{const R=u.current;if(!(!w||!G||!l||!R||i.state.transitionStatus==="ending")){if(!a){V.current=!0,W.request(P),R.style.removeProperty("--transform-origin");return}queueMicrotask(()=>{var D;const B=ds(R);R.style.removeProperty("--transform-origin");try{const ne=getComputedStyle(l),be=getComputedStyle(R),Q=lt(G),Z=xt(l),k=G.getBoundingClientRect(),ie=l.getBoundingClientRect(),_=k.left,K=k.height,ce=F||R,Ae=ce.scrollHeight,y=parseFloat(be.borderBottomWidth),fe=parseFloat(ne.marginTop)||10,ue=parseFloat(ne.marginBottom)||10,Se=parseFloat(ne.minHeight)||100,Pe=vt(be),Ce=5,Me=5,He=20,ye=Q.documentElement.clientHeight-fe-ue,Oe=Q.documentElement.clientWidth,je=ye-k.bottom+K,Le=E.current,Be=x.current;let se,qe=0,Ze=0;if(Le&&Be){const L=Be.getBoundingClientRect();se=Le.getBoundingClientRect();const oe=L.left-_,pe=se.left-ie.left,de=L.top-k.top+L.height/2,Ve=se.top-ie.top+se.height/2;qe=oe-pe,Ze=Ve-de}const ke=je+Ze+ue+y;let ve=Math.min(ye,ke);const $e=ye-fe-ue,Ne=ke-ve,_e=Math.max(Ce,_+qe),We=Oe-Me,Qe=Math.max(0,_e+ie.width-We);l.style.left=`${_e-Qe}px`,l.style.height=`${ve}px`,l.style.maxHeight="auto",l.style.marginTop=`${fe}px`,l.style.marginBottom=`${ue}px`,R.style.height="100%";const ze=ce.scrollHeight-ce.clientHeight,Xe=Ne>=ze;Xe&&(ve=Math.min(ye,ie.height)-(Ne-ze));const et=k.top<He||k.bottom>ye-He||ve<Math.min(Ae,Se),b=(((D=Z.visualViewport)==null?void 0:D.scale)??1)!==1&&Mn;if(et||b){V.current=!0,Je(l,le.current),Rt.flushSync(()=>z(!1));return}if(Xe){const L=Math.max(0,ye-ke);l.style.top=ie.height>=$e?"0":`${L}px`,l.style.height=`${ve}px`,ce.scrollTop=ce.scrollHeight-ce.clientHeight,T.current=Math.max(Se,ve)}else l.style.bottom="0",T.current=Math.max(Se,ve),ce.scrollTop=Ne;if(se){const L=ie.top,oe=ie.height,pe=se.top+se.height/2,de=oe>0?(pe-L)/oe*100:50,Ve=os(de,0,100);R.style.setProperty("--transform-origin",`50% ${Ve}%`)}(T.current===ye||ve>=Pe)&&(f.current=!0),P(),setTimeout(()=>{V.current=!0})}finally{B()}})}},[i,w,l,G,x,E,u,P,a,z,W,me,Ie,F]),n.useEffect(()=>{if(!a||!l||!w)return;const R=xt(l);function B(D){O(!1,Ee(Kt,D))}return R.addEventListener("resize",B),()=>{R.removeEventListener("resize",B)}},[O,a,l,w]);const te={...F?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":S||void 0,id:`${q}-list`},onKeyDown(R){h.current=!0,J&&Tn.has(R.key)&&R.stopPropagation()},onMouseMove(){h.current=!1},onPointerLeave(R){if(!j||kt(R)||R.pointerType==="touch")return;const B=R.currentTarget;U.start(0,()=>{i.set("activeIndex",null),B.focus({preventScroll:!0})})},onScroll(R){var B;F||(B=I.current)==null||B.call(I,R.currentTarget)},...a&&{style:F?{height:"100%"}:Bt}},Re=we("div",t,{ref:[s,u],state:H,stateAttributesMapping:as,props:[re,te,wn(C),{className:!F&&a?ct.className:void 0},r]});return v.jsxs(n.Fragment,{children:[!ae&&ct.getElement(Y),v.jsx(En,{context:N,modal:!1,disabled:!X,restoreFocus:!0,children:Re})]})});function vt(e){const t=e.maxHeight||"";return t.endsWith("px")&&parseFloat(t)||1/0}const It={transform:"none",scale:"1",translate:"0 0"};function us(e,t,s){s?e.setProperty(t,s):e.removeProperty(t)}function ds(e){const{style:t}=e,s={},o=Object.keys(It);for(const c of o)s[c]=t.getPropertyValue(c),t.setProperty(c,It[c]);return()=>{for(const c of o)us(t,c,s[c])}}const fs=n.forwardRef(function(t,s){const{className:o,render:c,...r}=t,{store:i,scrollHandlerRef:u}=Te(),{alignItemWithTriggerActive:M}=jt(),O=m(i,d.hasScrollArrows),x=m(i,d.openMethod),E=m(i,d.multiple),S={id:`${m(i,d.id)}-list`,role:"listbox","aria-multiselectable":E||void 0,onScroll(I){var j;(j=u.current)==null||j.call(u,I.currentTarget)},...M&&{style:Bt},className:O&&x!=="touch"?ct.className:void 0},P=he(I=>{i.set("listElement",I)});return we("div",t,{ref:[s,P],props:[S,r]})}),_t=n.createContext(void 0);function mt(){const e=n.useContext(_t);if(!e)throw new Error(Ye(57));return e}const ps=n.memo(n.forwardRef(function(t,s){const{render:o,className:c,value:r=null,label:i,disabled:u=!1,nativeButton:M=!1,...O}=t,x=n.useRef(null),E=An({label:i,textRef:x,indexGuessBehavior:Pn.GuessFromOrder}),{store:h,getItemProps:S,setOpen:P,setValue:I,selectionRef:j,typingRef:g,valuesRef:$,keyboardActiveRef:a,multiple:z,highlightItemOnHover:me}=Te(),Ie=De(),J=m(h,d.isActive,E.index),N=m(h,d.isSelected,E.index,r),Y=m(h,d.isSelectedByFocus,E.index),ae=m(h,d.isItemEqualToValue),U=E.index,q=U!==-1,w=n.useRef(null),X=ft(U);ee(()=>{if(!q)return;const p=$.current;return p[U]=r,()=>{delete p[U]}},[q,U,r,$]),ee(()=>{if(!q)return;const p=h.state.value;let H=p;z&&Array.isArray(p)&&p.length>0&&(H=p[p.length-1]),H!==void 0&&Ue(H,r,ae)&&h.set("selectedIndex",U)},[q,U,z,ae,h,r]);const re=n.useMemo(()=>({disabled:u,selected:N,highlighted:J}),[u,N,J]),C=S({active:J,selected:N});C.onFocus=void 0,C.id=void 0;const G=n.useRef(null),l=n.useRef("mouse"),F=n.useRef(!1),{getButtonProps:T,buttonRef:f}=wt({disabled:u,focusableWhenDisabled:!0,native:M});function xe(p){const H=h.state.value;if(z){const te=Array.isArray(H)?H:[],Re=N?jn(te,r,ae):[...te,r];I(Re,Ee(tt,p))}else I(r,Ee(tt,p)),P(!1,Ee(tt,p))}const V={role:"option","aria-selected":N,tabIndex:J?0:-1,onFocus(){h.set("activeIndex",U)},onMouseEnter(){!a.current&&h.state.selectedIndex===null&&h.set("activeIndex",U)},onMouseMove(){me&&h.set("activeIndex",U)},onMouseLeave(p){!me||a.current||kt(p)||Ie.start(0,()=>{h.state.activeIndex===U&&h.set("activeIndex",null)})},onTouchStart(){j.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(p){G.current=p.key,h.set("activeIndex",U)},onClick(p){F.current=!1,!(p.type==="keydown"&&G.current===null)&&(u||G.current===" "&&g.current||l.current!=="touch"&&!J||(G.current=null,xe(p.nativeEvent)))},onPointerEnter(p){l.current=p.pointerType},onPointerDown(p){l.current=p.pointerType,F.current=!0},onMouseUp(p){if(u)return;if(F.current){F.current=!1;return}const H=!j.current.allowSelectedMouseUp&&N,te=!j.current.allowUnselectedMouseUp&&!N;H||te||l.current!=="touch"&&!J||xe(p.nativeEvent)}},le=we("div",t,{ref:[f,s,E.ref,w],state:re,props:[C,V,O,T]}),W=n.useMemo(()=>({selected:N,indexRef:X,textRef:x,selectedByFocus:Y,hasRegistered:q}),[N,X,x,Y,q]);return v.jsx(_t.Provider,{value:W,children:le})})),ms=n.forwardRef(function(t,s){const o=t.keepMounted??!1,{selected:c}=mt();return o||c?v.jsx(gs,{...t,ref:s}):null}),gs=n.memo(n.forwardRef((e,t)=>{const{render:s,className:o,keepMounted:c,...r}=e,{selected:i}=mt(),u=n.useRef(null),{transitionStatus:M,setMounted:O}=St(i),x=n.useMemo(()=>({selected:i,transitionStatus:M}),[i,M]),E=we("span",e,{ref:[t,u],state:x,props:[{"aria-hidden":!0,children:"✔️"},r],stateAttributesMapping:Tt});return ut({open:i,ref:u,onComplete(){i||O(!1)}}),E})),hs=n.memo(n.forwardRef(function(t,s){const{indexRef:o,textRef:c,selectedByFocus:r,hasRegistered:i}=mt(),{selectedItemTextRef:u}=Te(),{className:M,render:O,...x}=t,E=n.useCallback(S=>{if(!S||!i)return;const P=u.current===null||!u.current.isConnected;(r||P&&o.current===0)&&(u.current=S)},[u,o,r,i]);return we("div",t,{ref:[E,s,c],props:x})}));function Is(){const e=rt.useParams();return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx(Cn,{icon:Jt,title:"D1",items:[v.jsx(Qt,{className:"flex items-center gap-1.5",params:{databaseId:e.databaseId},search:{table:void 0},to:"/d1/$databaseId",children:e.databaseId},"database-id"),v.jsx(xs,{},"table-selector")]}),v.jsx("div",{className:"flex-1 overflow-hidden"})]})}function xs(){const e=rt.useLoaderData(),t=en(),s=rt.useSearch(),o=n.useCallback(c=>{c!==null&&t({search:{table:c},to:"."})},[t]);return e.tables.length<=0?v.jsx("span",{className:"flex items-center gap-1.5",children:"No tables"},"empty-tables-select"):v.jsxs($n,{onValueChange:o,value:s.table??null,children:[v.jsxs(Gn,{className:"inline-flex items-center gap-1 px-2 py-1 -mx-1.5 rounded-md bg-transparent text-sm text-text cursor-pointer border-none transition-colors hover:bg-border/50 data-popup-open:bg-border/50",children:[v.jsx(Jn,{placeholder:"Select table"}),v.jsx(Qn,{children:v.jsx(Pt,{className:"w-3.5 h-3.5 text-text-secondary"})})]}),v.jsx(ts,{children:v.jsx(ss,{align:"start",alignItemWithTrigger:!1,side:"bottom",sideOffset:4,children:v.jsx(cs,{className:"min-w-36 max-h-72 bg-bg border border-border rounded-lg shadow-[0_4px_12px_rgba(0,0,0,0.15)] z-100 overflow-hidden transition-[opacity,transform] duration-150 data-starting-style:opacity-0 data-starting-style:-translate-y-1 data-ending-style:opacity-0 data-ending-style:-translate-y-1",children:v.jsx(fs,{className:"p-1",children:e.tables.map(c=>v.jsxs(ps,{className:"flex items-center gap-2 w-full py-1.5 px-2 rounded-md text-sm text-text cursor-pointer transition-colors select-none outline-none data-highlighted:bg-bg-secondary dark:data-highlighted:bg-bg-tertiary",value:c.value,children:[v.jsx(ms,{className:"flex items-center w-4",children:v.jsx(Vn,{className:"w-3.5 h-3.5"})}),v.jsx(hs,{children:c.label})]},c.value))})})})})]},"table-select")}export{Is as component};
