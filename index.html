<!DOCTYPE html>
<html lang="sv">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TF5325FM');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SETTEBELLO Marketing</title>

  <!-- Prestanda: snabbare typsnittsladdning -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
  <meta name="theme-color" content="#0f0f0f">

  <!-- ✅ Extern CSS -->
<link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="pageLoader" class="active"></div>
  <!-- Högst upp-ankare för att kunna gå HELT upp -->
  <div id="top"></div>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TF5325FM"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- ===== Fixed topbar ===== -->
  <header class="topbar" role="banner">
    <a href="#top" class="home-btn" aria-label="Hem">
      <span class="diamond" aria-hidden="true"></span>
    </a>

    <a href="#top" class="center-logo" aria-label="SETTEBELLO – gå till toppen">
      <div class="brand">SETTEBELLO</div>
      <div class="badge">MARKETING</div>
    </a>

    <button class="hamburger" id="menuToggle" aria-label="Öppna meny" aria-controls="siteMenu" aria-expanded="false">
      <span class="bars" aria-hidden="true"></span>
    </button>

    <nav class="menu" id="siteMenu" aria-label="Primär">
      <a class="primary" href="https://www.linkedin.com/in/leo-castellucci-b00b9a1b7/" target="_blank" rel="noopener">Connect on LinkedIn</a>
      <a href="#about">About</a>
      <a href="#portfolio">Portfolio</a>
      <a href="#services">Services</a>
    </nav>
  </header>

  <div class="page" id="home">
    <!-- ===== Startsida/hero ===== -->
    <div class="hero-header">
      <div class="logo-wrap">
        <div class="pixel-diamond" aria-hidden="true"></div>
        <div class="brand-text">SETTEBELLO</div>
        <div class="badge-marketing">MARKETING</div>
      </div>

      <nav class="cta-stack" aria-label="Startnav">
        <a class="btn-pill btn-linkedin" href="https://www.linkedin.com/in/leo-castellucci-b00b9a1b7/" target="_blank" rel="noopener">CONNECT ON LINKEDIN</a>
        <a class="btn-pill btn-about" href="#about">ABOUT</a>
        <a class="btn-pill btn-portfolio" href="#portfolio">PORTFOLIO</a>
        <a class="btn-pill btn-services" href="#services">SERVICES</a>
      </nav>
    </div>

    <!-- ===== Innehåll ===== -->
    <main>
      <!-- ABOUT -->
      <section id="about" aria-label="About">
        <div class="chip"><span class="tiny-diamond"></span> Growth Marketing &amp; Design</div>
        <h1 class="hero">We help ambitious brands grow faster through data, creativity, and strategy.</h1>
        <p class="lead">SETTEBELLO combine sharp strategy, creative design, and data-driven execution to help brands grow faster and smarter. By blending performance marketing with strong brand thinking, we create campaigns that not only capture attention but also convert. It’s growth you can see, track, and measure.</p>
        <div class="spacer-portfolio"></div>
      </section>

      <!-- PORTFOLIO -->
      <section id="portfolio" aria-label="Portfolio">
        <div class="section-title">PORTFOLIO</div>
        <div class="portfolio-row">
          <div class="circle"><div class="diamond"></div></div>
          <div class="circle"><div class="diamond"></div></div>
          <div class="circle"><div class="diamond"></div></div>
          <div class="circle"><div class="diamond"></div></div>
          <div class="circle"><div class="diamond"></div></div>
        </div>
        <div class="spacer-services"></div>
      </section>

      <!-- SERVICES -->
      <section id="services" aria-label="Services">
        <div class="section-title">SERVICES</div>
        <div class="services-grid">
          <article class="card">
            <div class="tag">GS</div>
            <h3>Growth Strategy</h3>
            <p>Audit, value proposition, roadmap, KPI setup.</p>
          </article>
          <article class="card">
            <div class="tag">PA</div>
            <h3>Paid Acquisition</h3>
            <p>Search, social, and programmatic ads.</p>
          </article>
          <article class="card">
            <div class="tag">GD</div>
            <h3>Graphic Design</h3>
            <p>Visual layout, illustrations, print, and digital design.</p>
          </article>
          <article class="card">
            <div class="tag">SB</div>
            <h3>Strategic Branding</h3>
            <p>Logo design, brand strategy, messaging, brand guidelines.</p>
          </article>
        </div>
      </section>

      <!-- EMAIL GATE -->
      <section id="toolbox-gate" aria-label="Toolbox Access">
        <div class="section-title">ACCESS TOOLBOX</div>
        
        <div id="gateUnlocked" class="hidden">
          <h2 class="hero">Toolbox Already Unlocked!</h2>
          <p class="lead">Your access is active. Click below to enter the premium marketing resource center.</p>
          <div class="audit-container">
            <a href="toolbox.html" class="btn-pill btn-linkedin" id="continueToToolbox" style="min-width: auto; padding: 26px 48px; display: inline-block;">CONTINUE TO TOOLBOX</a>
          </div>
        </div>

        <div id="gateLocked">
          <h2 class="hero">Unlock Our Exclusive Toolbox</h2>
          <p class="lead">Submit your email below to unlock the SETTEBELLO Marketing Toolbox.</p>
          
          <div class="audit-container" id="gateContainer">
            <form id="gateForm" class="audit-form" style="display: flex; flex-direction: column; align-items: flex-start;">
              <div style="display: flex; gap: 16px; width: 100%; flex-wrap: wrap;">
                <input type="email" id="email" placeholder="you@example.com" required class="audit-input" aria-label="Email Address">
                <button type="submit" class="btn-pill btn-linkedin" id="gateSubmit">UNLOCK TOOLBOX</button>
              </div>
              <label style="display: flex; align-items: center; gap: 12px; margin-top: 20px; color: var(--muted); font-size: 14px; cursor: pointer;">
                <input type="checkbox" id="consent" required style="width: 18px; height: 18px; cursor: pointer;">
                I consent to receive marketing updates and agree to the terms.
              </label>
              <div id="gateStatus" class="audit-status hidden" style="margin-top: 16px;"></div>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>

  <style>
    /* Integrated Audit Styles */
    .audit-container { margin-top: 40px; max-width: 860px; }
    .audit-form { display: flex; gap: 16px; margin-bottom: 40px; flex-wrap: wrap; }
    .audit-input {
      flex: 1;
      min-width: 280px;
      background: var(--card-bg);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 999px;
      padding: 20px 30px;
      color: var(--text);
      font-family: inherit;
      font-size: 16px;
      outline: none;
      transition: border-color .2s ease;
    }
    .audit-input:focus { border-color: var(--lime-2); }
    .hidden { display: none !important; }
    
    @media (max-width: 900px) {
      .audit-form { flex-direction: column; }
      .audit-input { width: 100%; }
    }
  </style>

  <script src="menu.js"></script>
  <script src="assets/gate.js"></script>
  <script>
    // Page Loader finish
    window.addEventListener("DOMContentLoaded", () => {
      const loader = document.getElementById("pageLoader");
      if (loader) {
        loader.classList.add("finishing");
        setTimeout(() => { loader.style.display = "none"; }, 300);
      }
    });

    // Handle internal link clicks for loader
    document.querySelectorAll('a').forEach(link => {
      // Relative links like 'toolbox.html' or absolute links to same domain
      if (link.hostname === window.location.hostname || !link.hostname) {
        if (!link.hash && !link.target && link.getAttribute('href') !== '#') {
          link.addEventListener('click', (e) => {
            if (e.metaKey || e.ctrlKey) return;
            const loader = document.getElementById("pageLoader");
            if (loader) {
              loader.style.display = "block";
              loader.classList.remove("finishing");
              loader.classList.add("active");
            }
          });
        }
      }
    });
  </script>
  <script>
(function () {
  // Ensure dataLayer exists
  window.dataLayer = window.dataLayer || [];

  function getDeviceType() {
    return window.innerWidth < 768 ? "mobile" : "desktop";
  }

  function getRefDomain(ref) {
    try {
      if (!ref) return "";
      return new URL(ref).hostname || "";
    } catch (e) {
      return "";
    }
  }

  function getTrafficSource() {
    try {
      var params = new URLSearchParams(window.location.search);
      var utm_source = params.get("utm_source");
      var utm_medium = params.get("utm_medium");
      var utm_campaign = params.get("utm_campaign");

      if (utm_source || utm_medium || utm_campaign) {
        return [
          utm_source ? ("utm_source=" + utm_source) : null,
          utm_medium ? ("utm_medium=" + utm_medium) : null,
          utm_campaign ? ("utm_campaign=" + utm_campaign) : null
        ].filter(Boolean).join("&");
      }

      var refDomain = getRefDomain(document.referrer);
      return refDomain ? ("referrer=" + refDomain) : "direct";
    } catch (e) {
      return "direct";
    }
  }

  function clampText(s) {
    if (!s) return null;
    s = String(s).replace(/\s+/g, " ").trim();
    if (!s) return null;
    return s.length > 80 ? s.slice(0, 80) : s;
  }

  function getScrollPercent() {
    var doc = document.documentElement;
    var scrollTop = window.pageYOffset || doc.scrollTop || 0;
    var scrollHeight = doc.scrollHeight || 0;
    var clientHeight = doc.clientHeight || 0;
    var denom = Math.max(1, scrollHeight - clientHeight);
    return Math.max(0, Math.min(100, Math.round((scrollTop / denom) * 100)));
  }

  function getClosestSectionName(el) {
    try {
      if (!el) return "unknown";
      var node = el.closest && el.closest("section,[id]");
      if (node && node.id) return node.id;
      var main = el.closest && el.closest("main");
      if (main && main.id) return main.id;
      return "unknown";
    } catch (e) {
      return "unknown";
    }
  }

  // Global helper as requested
  window.trackSiteEngagement = function (data) {
    data = data || {};
    window.dataLayer.push({
      event: "site_engagement",
      action_type: data.action_type || null,
      element_name: data.element_name || null,
      section_name: data.section_name || null,
      engagement_time: data.engagement_time || null,
      scroll_depth: data.scroll_depth || null,
      outbound_url: data.outbound_url || null,
      device_type: data.device_type || getDeviceType(),
      traffic_source: data.traffic_source || getTrafficSource()
    });
  };

  // A) Outbound click tracking
  function isOutboundLink(a) {
    try {
      if (!a || !a.href) return false;
      var href = a.getAttribute("href") || "";
      if (!href) return false;
      if (href.startsWith("#")) return false;

      var url;
      if (href.startsWith("mailto:") || href.startsWith("tel:")) return true;

      url = new URL(a.href, window.location.href);
      return url.hostname && url.hostname !== window.location.hostname;
    } catch (e) {
      return false;
    }
  }

  function getLinkName(a) {
    return clampText(a.getAttribute("aria-label") || a.textContent || a.title || a.href);
  }

  document.addEventListener("click", function (e) {
    try {
      var a = e.target && (e.target.closest ? e.target.closest("a") : null);
      if (!a) return;
      if (!isOutboundLink(a)) return;

      var href = a.href || a.getAttribute("href");
      window.trackSiteEngagement({
        action_type: "outbound_click",
        element_name: getLinkName(a),
        section_name: getClosestSectionName(a),
        outbound_url: href,
        scroll_depth: getScrollPercent()
      });
    } catch (err) {
      // swallow errors
    }
  }, true);

  // B) Section views via IntersectionObserver (>= 50%)
  var seenSections = new Set();

  function collectSections() {
    var sections = new Set();

    document.querySelectorAll("section[id]").forEach(function (el) { sections.add(el); });
    document.querySelectorAll("main [id]").forEach(function (el) { sections.add(el); });
    document.querySelectorAll("[id]").forEach(function (el) {
      // avoid tiny/utility ids
      if (!el.id) return;
      if (el === document.body || el === document.documentElement) return;
      sections.add(el);
    });

    return Array.from(sections).filter(function (el) {
      try {
        // avoid tracking hidden or zero height
        var r = el.getBoundingClientRect();
        return r.height >= 80 && r.width >= 80;
      } catch (e) {
        return false;
      }
    });
  }

  function setupSectionObserver() {
    if (!("IntersectionObserver" in window)) return;

    var els = collectSections();
    if (!els.length) return;

    var obs = new IntersectionObserver(function (entries) {
      entries.forEach(function (entry) {
        if (!entry.isIntersecting) return;
        if (entry.intersectionRatio < 0.5) return;
        var id = entry.target && entry.target.id;
        if (!id) return;
        if (seenSections.has(id)) return;
        seenSections.add(id);

        window.trackSiteEngagement({
          action_type: "section_view",
          section_name: id,
          scroll_depth: getScrollPercent()
        });
      });
    }, { threshold: [0.5] });

    els.forEach(function (el) {
      try { obs.observe(el); } catch (e) {}
    });
  }

  // C) Scroll depth milestones
  var scrollMilestones = [25, 50, 75, 90];
  var firedMilestones = new Set();

  function onScroll() {
    var p = getScrollPercent();
    for (var i = 0; i < scrollMilestones.length; i++) {
      var m = scrollMilestones[i];
      if (p >= m && !firedMilestones.has(m)) {
        firedMilestones.add(m);
        window.trackSiteEngagement({
          action_type: "scroll_depth",
          scroll_depth: m
        });
      }
    }
  }

  window.addEventListener("scroll", function () {
    try { onScroll(); } catch (e) {}
  }, { passive: true });

  // D) 15s active engagement time
  var activeMs = 0;
  var lastTick = Date.now();
  var hasFiredTime = false;
  var isActive = true;

  function markActive() {
    isActive = true;
  }

  ["mousemove", "keydown", "scroll", "touchstart"].forEach(function (evt) {
    window.addEventListener(evt, markActive, { passive: true });
  });

  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      isActive = false;
    } else {
      isActive = true;
      lastTick = Date.now();
    }
  });

  setInterval(function () {
    try {
      var now = Date.now();
      var delta = now - lastTick;
      lastTick = now;

      if (!document.hidden && isActive) {
        activeMs += delta;
      }

      // decay activity so mousemove once doesn't count forever
      isActive = false;

      if (!hasFiredTime && activeMs >= 15000) {
        hasFiredTime = true;
        window.trackSiteEngagement({
          action_type: "engagement_time",
          engagement_time: activeMs,
          scroll_depth: getScrollPercent()
        });
      }
    } catch (e) {}
  }, 1000);

  // Init
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", function () {
      setupSectionObserver();
      onScroll(); // capture early scroll state
    });
  } else {
    setupSectionObserver();
    onScroll();
  }
})();
</script>
</body>
</html>
